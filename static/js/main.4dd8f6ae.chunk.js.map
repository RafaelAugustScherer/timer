{"version":3,"sources":["components/Input.js","components/TimeoutVideo.js","components/Soundtrack.js","App.js","index.js"],"names":["Input","this","props","name","value","onChange","type","Component","TimeoutVideo","vidRef","useRef","canPlay","handleEnd","current","play","className","ref","onEnded","preload","src","process","musics","publicFolder","Soundtrack","updateMusicName","music","musicName","pause","isPlaying","paused","handleNext","newIndex","index","length","changeMusic","Audio","addEventListener","App","startTimer","soundtrack","state","timer","setInterval","timerHandler","setState","isStarted","isPaused","pauseTimer","fieldsBlinker","clearInterval","timerDisplay","resetTimer","hour","minute","second","isEnded","endTimer","time","Object","values","map","Number","entries","reduce","acc","timeUnit","String","endIntro","introEnded","endTimeoutVideo","target","CLOCK_MAX","console","log","document","title","alt","autoPlay","muted","idx","arr","onClick","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4dd8f6ae.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass Input extends Component {\r\n  render() {\r\n    let { name, value, onChange } = this.props;\r\n\r\n    return (\r\n      <input\r\n        type=\"text\"\r\n        name={ name }\r\n        value={ value }\r\n        onChange={ onChange }\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Input;","import React, { useRef } from 'react';\r\n\r\nfunction TimeoutVideo(props) {\r\n  const vidRef = useRef(null);\r\n  const { canPlay, handleEnd } = props;\r\n\r\n  const playVideo = () => {\r\n    vidRef.current.play();\r\n  }\r\n\r\n  canPlay && playVideo();\r\n\r\n  const publicFolder = process.env.PUBLIC_URL;\r\n  return (\r\n    <video className=\"timeout-video\" ref={vidRef} onEnded={ handleEnd } preload=\"auto\">\r\n      <source src={ `${publicFolder}/assets/explosion.mp4` } type=\"video/mp4\" />\r\n    </video>\r\n  )\r\n}\r\n\r\nexport default TimeoutVideo;","const musics = [\r\n  \"The Ink Spots - It's All Over But The Crying\",\r\n  'Billie Holiday - Easy Living',\r\n  'Andrews Sisters & Danny Kaye - Civilization',\r\n  \"The Ink Spots - I Don't Want To Set The World On Fire\",\r\n  'Connie Allen - Rocket 69',\r\n];\r\nconst publicFolder = process.env.PUBLIC_URL;\r\n\r\nclass Soundtrack {\r\n  constructor(updateMusicName) {\r\n    this.updateMusicName = updateMusicName;\r\n    this.musicName = musics[0];\r\n    this.music = new Audio(`${publicFolder}/assets/soundtrack/${this.musicName}.mp3`);\r\n    this.music.addEventListener('ended', () => this.handleNext());\r\n    this.index = 0;\r\n  }\r\n\r\n  play = () => {\r\n    const { music, musicName, updateMusicName } = this;\r\n    music.play();\r\n    updateMusicName(musicName);\r\n  }\r\n\r\n  pause = () => {\r\n    this.music.pause();\r\n  }\r\n\r\n  isPlaying = () => !this.music.paused\r\n\r\n  handleNext = () => {\r\n    let newIndex = this.index + 1;\r\n    if(newIndex === musics.length - 1) newIndex = 0;\r\n    this.index = newIndex;\r\n\r\n    this.musicName = musics[newIndex];\r\n    this.updateMusicName(this.musicName);\r\n\r\n    this.music.src = `${publicFolder}/assets/soundtrack/${musics[newIndex]}.mp3`;\r\n    this.music.play();\r\n  }\r\n\r\n  changeMusic = (musicName) => {\r\n    this.musicName = musicName;\r\n    this.music.src = `${publicFolder}/assets/soundtrack/${musicName}.mp3`;\r\n  }\r\n}\r\n\r\nexport default Soundtrack;","import React, { Component } from 'react';\nimport { VscDebugStart, VscDebugPause, VscDebugRestart } from 'react-icons/vsc';\nimport Input from './components/Input';\nimport TimeoutVideo from './components/TimeoutVideo';\nimport Soundtrack from './components/Soundtrack';\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    const soundtrack = new Soundtrack(this.updateMusicName);\n\n    this.state = {\n      time: {\n        hour: '00',\n        minute: '00',\n        second: '00',\n      },\n      timer: null,\n      isStarted: false,\n      isPaused: false,\n      isEnded: false,\n      introEnded: false,\n      soundtrack,\n      musicName: 'Awaiting User',\n      fieldsBlinker: null,\n      timerDisplay: true,\n    };\n  }\n\n  componentWillUnmount() {\n    const { soundtrack, timer, fieldsBlinker } = this.state;\n\n    soundtrack.pause();\n\n    clearInterval(timer);\n    clearInterval(fieldsBlinker);\n  }\n\n  startTimer = () => {\n    const { soundtrack } = this.state;\n    if (!soundtrack.isPlaying()) soundtrack.play();\n\n    const timer = setInterval(() => {\n      this.timerHandler(timer);\n    }, 1000);\n\n    this.setState({\n      isStarted: true,\n      isPaused: false,\n      timer,\n    });\n  };\n\n  pauseTimer = () => {\n    const { timer, fieldsBlinker } = this.state;\n    clearInterval(timer);\n    clearInterval(fieldsBlinker);\n\n    this.setState({\n      isPaused: true,\n      timer: null,\n      fieldsBlinker: null,\n      timerDisplay: true,\n    });\n  };\n\n  resetTimer = () => {\n    this.setState({\n      hour: 0,\n      minute: 0,\n      second: 0,\n      isStarted: false,\n      isPaused: false,\n      isEnded: false,\n      timer: null,\n    });\n  };\n\n  endTimer = () => {\n    const { soundtrack } = this.state;\n    soundtrack.pause();\n\n    const fieldsBlinker = setInterval(() => {\n      this.setState(({ timerDisplay }) => ({\n        timerDisplay: !timerDisplay,\n      }));\n    }, 500);\n    this.setState({ fieldsBlinker, isEnded: true, isStarted: false, isPaused: false });\n  };\n\n  timerHandler = (timer) => {\n    let { time } = this.state;\n    let [hour, minute, second] = Object.values(time).map((value) => Number(value));\n    const CLOCK_MAX = 59;\n\n    if (hour === 0 && minute === 0 && second === 0) {\n      clearInterval(timer);\n      this.endTimer();\n    } else if (minute === 0 && second === 0) {\n      hour -= 1;\n      minute = CLOCK_MAX;\n      second = CLOCK_MAX;\n    } else if (second === 0) {\n      minute -= 1;\n      second = CLOCK_MAX;\n    } else {\n      second -= 1;\n    }\n\n    time = Object.entries({ hour, minute, second }).reduce(\n      (acc, [timeUnit, value]) => ({\n        ...acc,\n        [timeUnit]: value < 10 ? `0${value}` : String(value),\n      }),\n      {}\n    );\n    this.setState({ time });\n  };\n\n  endIntro = () => this.setState({ introEnded: true });\n  \n  endTimeoutVideo = () => {\n    const { fieldsBlinker } = this.state;\n\n    clearInterval(fieldsBlinker);\n    this.setState({ isEnded: false, fieldsBlinker: null, timerDisplay: true });\n  }\n\n  onChange = ({ target: { name, value } }) => {\n    const { time, soundtrack } = this.state;\n    const CLOCK_MAX = name === 'hour' ? 99 : 59;\n\n    value = Number(value);\n    value = value < 10 ? `0${value}` : String(value);\n    \n    if (value.length <= 2 && Number(value) <= CLOCK_MAX) {\n      this.setState({\n        time: {\n          ...time,\n          [name]: value,\n        },\n      });\n    }\n    if (name === 'hour' && value === '69') {\n      soundtrack.changeMusic('Connie Allen - Rocket 69');\n    }\n    console.log(name, value);\n  };\n\n  updateMusicName = (musicName) => this.setState({ musicName });\n\n  render() {\n    const { time, isStarted, isPaused, isEnded, introEnded, musicName, timerDisplay } =\n      this.state;\n    const { hour, minute, second } = time;\n    const { startTimer, pauseTimer, resetTimer, onChange, endIntro, endTimeoutVideo } =\n      this;\n\n    // https://create-react-app.dev/docs/using-the-public-folder/\n    const publicFolder = process.env.PUBLIC_URL;\n    \n    document.title = `Pip Boy's Timer (${hour}:${minute}:${second})`\n    return (\n      <div className=\"App\">\n        <img\n          src={`${publicFolder}/assets/pip-boy.png`}\n          alt=\"Pip Boy\"\n          className=\"pip-boy-image\"\n        />\n        <TimeoutVideo canPlay={isEnded} handleEnd={endTimeoutVideo} />\n        <div className=\"pip-boy-screen\">\n          {!introEnded && (\n            <video autoPlay muted onEnded={endIntro} className=\"intro-video\">\n              <source src={`${publicFolder}/assets/initialize.mp4`} type=\"video/mp4\" />\n            </video>\n          )}\n          <h2 className=\"music-name\">{musicName}</h2>\n          {\n            <div\n              className={`timer${!isStarted ? '-input' : ''}${\n                !timerDisplay ? ' hidden' : ''\n              }`}\n            >\n              {Object.entries(time).map(([timeUnit, value], idx, arr) => (\n                <>\n                  {!isStarted ? (\n                    <Input\n                      key={timeUnit}\n                      name={timeUnit}\n                      value={value}\n                      onChange={onChange}\n                    />\n                  ) : (\n                    <span key={timeUnit}>{value}</span>\n                  )}\n                  {idx !== arr.length - 1 && ':'}\n                </>\n              ))}\n            </div>\n          }\n          {!isStarted ? (\n            <button type=\"button\" onClick={startTimer}>\n              <VscDebugStart />\n            </button>\n          ) : !isPaused ? (\n            <button type=\"button\" onClick={pauseTimer}>\n              <VscDebugPause />\n            </button>\n          ) : (\n            <div>\n              <button type=\"button\" onClick={startTimer}>\n                <VscDebugStart />\n              </button>\n              <button type=\"button\" onClick={resetTimer}>\n                <VscDebugRestart />\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}